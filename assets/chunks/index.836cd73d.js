import{t as J,i as V}from"../app.e1125cb5.js";import{d as X,H as z,N as _,ax as ee,g as p,y as te,v as E,x as I,j as ne,ah as se,au as oe,a5 as ae,l as ie,Q as le}from"./framework.c6de8d80.js";import"./theme.47749b5d.js";const re=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function ue(t){return function(){const u=Object.create(null);return re.forEach(i=>{u[i]=function(s){return(...f)=>{if(!t.value)throw new Error("ECharts is not initialized yet.");return t.value[s].apply(t.value,f)}}(i)}),u}()}const ce={autoresize:[Boolean,Object]},pe=/^on[^a-z]/,P=t=>pe.test(t);function b(t,u){const i=ae(t)?ie(t):t;return i&&typeof i=="object"&&"value"in i?i.value||u:i||u}const de="ecLoadingOptions",fe={loading:Boolean,loadingOptions:Object};let d=null;const N="x-vue-echarts";document.head.appendChild(document.createElement("style")).textContent=`x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
`;const he=function(){if(d!=null)return d;if(typeof HTMLElement>"u"||typeof customElements>"u")return d=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(N)}catch{return d=!1}return d=!0}(),ve="ecTheme",ge="ecInitOptions",Oe="ecUpdateOptions",k=/(^&?~?!?)native:/;var be=X({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...ce,...fe},emits:{},inheritAttrs:!1,setup(t,{attrs:u}){const i=z(),s=z(),f=z(),S=_(ve,null),$=_(ge,null),M=_(Oe,null),{autoresize:C,manualUpdate:R,loading:B,loadingOptions:K}=ee(t),W=p(()=>f.value||t.option||null),T=p(()=>t.theme||b(S,{})),w=p(()=>t.initOptions||b($,{})),A=p(()=>t.updateOptions||b(M,{})),Y=p(()=>function(n){const e={};for(const o in n)P(o)||(e[o]=n[o]);return e}(u)),y={},h=te().proxy.$listeners,v={};function g(n){if(!i.value)return;const e=s.value=V(i.value,T.value,w.value);function o(){const l=n||W.value;l&&e.setOption(l,A.value)}t.group&&(e.group=t.group),Object.keys(v).forEach(l=>{let r=v[l];if(!r)return;let a=l.toLowerCase();a.charAt(0)==="~"&&(a=a.substring(1),r.__once__=!0);let m=e;if(a.indexOf("zr:")===0&&(m=e.getZr(),a=a.substring(3)),r.__once__){delete r.__once__;const L=r;r=(...c)=>{L(...c),m.off(a,r)}}m.on(a,r)}),C.value?le(()=>{e&&!e.isDisposed()&&e.resize(),o()}):o()}function x(){s.value&&(s.value.dispose(),s.value=void 0)}h?Object.keys(h).forEach(n=>{k.test(n)?y[n.replace(k,"$1")]=h[n]:v[n]=h[n]}):Object.keys(u).filter(n=>P(n)).forEach(n=>{let e=n.charAt(2).toLowerCase()+n.slice(3);if(e.indexOf("native:")!==0)e.substring(e.length-4)==="Once"&&(e=`~${e.substring(0,e.length-4)}`),v[e]=u[n];else{const o=`on${e.charAt(7).toUpperCase()}${e.slice(8)}`;y[o]=u[n]}});let O=null;E(R,n=>{typeof O=="function"&&(O(),O=null),n||(O=E(()=>t.option,(e,o)=>{e&&(s.value?s.value.setOption(e,{notMerge:e!==o,...A.value}):g())},{deep:!0}))},{immediate:!0}),E([T,w],()=>{x(),g()},{deep:!0}),I(()=>{t.group&&s.value&&(s.value.group=t.group)});const F=ue(s);return function(n,e,o){const l=_(de,{}),r=p(()=>({...b(l,{}),...o==null?void 0:o.value}));I(()=>{const a=n.value;a&&(e.value?a.showLoading(r.value):a.hideLoading())})}(s,B,K),function(n,e,o){E([o,n,e],([l,r,a],m,L)=>{let c=null;if(l&&r&&a){const{offsetWidth:G,offsetHeight:Q}=l,Z=a===!0?{}:a,{throttle:D=100,onResize:j}=Z;let U=!1;const H=()=>{r.resize(),j==null||j()},q=D?J(H,D):H;c=new ResizeObserver(()=>{(U||(U=!0,l.offsetWidth!==G||l.offsetHeight!==Q))&&q()}),c.observe(l)}L(()=>{c&&(c.disconnect(),c=null)})})}(s,C,i),ne(()=>{g()}),se(()=>{he&&i.value?i.value.__dispose=x:x()}),{chart:s,root:i,setOption:function(n,e){t.manualUpdate&&(f.value=n),s.value?s.value.setOption(n,e||{}):g(n)},nonEventAttrs:Y,nativeListeners:y,...F}},render(){const t={...this.nonEventAttrs,...this.nativeListeners};return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",oe(N,t)}});export{ge as INIT_OPTIONS_KEY,de as LOADING_OPTIONS_KEY,ve as THEME_KEY,Oe as UPDATE_OPTIONS_KEY,be as default};
